(this.webpackJsonpatlas=this.webpackJsonpatlas||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),c=n(36),o=n.n(c),a=n(20),l=n(19),s=n(9),u=n(2),d=n.n(u),b=n(71),f=n(8),p=n(135),h=n(70),j=n(60),v=n(68),g="https://zvwrqklvkomshwpkxepe.supabase.co",x="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp2d3Jxa2x2a29tc2h3cGt4ZXBlIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDcwOTg3MjgsImV4cCI6MTk2MjY3NDcyOH0.ZZMKNhlYSsvC0VB6fU1b1Xyp1Fn9WFS9Gpd8pVCaZCE",O=Object(v.a)(g,x),m=n(22),k=n(24),w=n(26),y=n(61),I=n(62),S=n(43),C=n(69),L=n(136),T=n(57),z=n(65),E=function(e){return{activeTool:"open",setActiveTool:function(t){e((function(e){return{activeTool:e.activeTool===t?null:t}}))}}},A=n.n(z)()((function(e,t){return Object(w.a)({},E(e,t))})),N=n(4),_=function(e){var t=e.str,n=e.substr,r=void 0===n?"":n;if(!r||!r.trim())return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(j.d,{mx:1,my:.5,fontSize:["sm","sm","md"],children:t})});var i=t.toLowerCase().indexOf(r.toLowerCase());if(i>-1){var c=i+r.length,o=t.slice(0,i),a=t.slice(i,c),l=t.slice(c,t.length);return Object(N.jsxs)(j.d,{fontSize:["sm","sm","md"],mx:1,my:.5,children:[o,Object(N.jsx)(j.d,{as:"span",fontWeight:600,color:"teal",children:a}),l]})}return null};function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};0===e.url.indexOf("http://")||0===e.url.indexOf("https://")?window.open(e.url,"_blank"):window.open("http://".concat(e.url),"_blank")}n(123);var F=function(e){var t=e.link,n=e.inputTerm,i=e.onClick,c=e.activeLinkId,o=e.openLink,a=e.editLinkName,l=e.deleteLink,u=Object(r.useState)((null===t||void 0===t?void 0:t.name)||""),d=Object(s.a)(u,2),b=d[0],f=d[1],p=Object(L.a)({type:"link",item:t,collect:function(e){return{isDragging:e.isDragging()}}}),h=Object(s.a)(p,2),v=h[0].isDragging,g=h[1],x=t.id,O=t.url,m=t.created_at,k=t.name,w=x===c,I=Object(C.a)(new Date(m),"MMM d");return Object(N.jsxs)(j.b,{onClick:function(){i(t)},_hover:{cursor:"pointer",bg:w?null:"gray.200"},direction:"row",align:w?"flex-start":"center",width:"100%",bg:v?"gray.200":w?"light":null,minHeight:w?"100px":null,boxShadow:w?"base":null,mb:2,py:2,px:2,borderRadius:10,ref:g,children:[w?Object(N.jsx)(S.a,{py:1,style:{width:"200px"},value:b||"",placeholder:"Enter name...",onChange:function(e){f(e.target.value)},onBlur:function(){a({linkId:t.id,newLinkName:b})}}):Object(N.jsx)(j.d,{py:1,width:"200px",color:k?"black":"gray",children:k||"Unnamed"}),Object(N.jsxs)(j.d,{py:1,color:"gray",width:"200px",children:["Added ",I]}),Object(N.jsx)(j.a,{py:1,width:"50%",children:Object(N.jsx)(_,{str:O,substr:n})}),Object(N.jsx)(j.b,{align:"center",justify:"flex-end",flex:1,children:Object(N.jsxs)(j.c,{direction:"row",spacing:2,align:"center",children:[w?Object(N.jsx)(y.a,{width:"100px",borderRadius:8,colorScheme:"red",color:w?"white":"warning",fontSize:"sm",variant:w?"solid":"ghost",rightIcon:Object(N.jsx)(T.b,{size:"18px"}),onClick:function(e){e.stopPropagation(),l(t.id)},children:"DELETE"}):null,Object(N.jsx)(y.a,{width:"100px",borderRadius:8,colorScheme:w?"teal":null,color:w?"white":"gray.600",fontSize:"sm",variant:w?"solid":"ghost",rightIcon:Object(N.jsx)(T.a,{size:"20px"}),onClick:function(e){e.stopPropagation(),o(t)},children:"OPEN"})]})})]})},M=function(e){var t=e.links,n=e.inputTerm,r=e.activeLinkId,i=e.setActiveLinkId,c=e.editLinkName,o=e.deleteLink,a=A((function(e){return e.activeTool}));if(!t)return null;var l=function(e){r===e.id||i(e.id)};return Object(N.jsx)(j.b,{direction:"column",flex:1,pl:2,mr:5,pb:2,children:t.map((function(e){return Object(N.jsx)(F,{link:e,inputTerm:n,onClick:l,openLink:B,activeTool:a,activeLinkId:r,setActiveLinkId:i,editLinkName:c,deleteLink:o},e.id)}))})},D=n(137),W=function(e){var t=e.topic,n=e.activeTopicId,r=e.setActiveTopicId,i=e.topicLinksCount,c=e.addLinkToTopic,o=Object(D.a)({accept:"link",drop:function(e){c({linkId:e.id,topicId:t.id})},collect:function(e){return{isOver:e.isOver()}}}),a=Object(s.a)(o,2),l=a[0].isOver,u=a[1],d=t.id,b=t.name;return Object(N.jsx)(j.a,{ref:u,width:"100%",bg:l?"cyan.100":n===d?"gray.50":null,_hover:{bg:"gray.100",cursor:"pointer"},onClick:function(){r(d)},children:Object(N.jsxs)(j.d,{py:2,px:6,alignSelf:"flex-start",fontWeight:n===d?"bold":null,onClick:function(){r(d)},children:[b||"Untitled"," (",i,")"]})},d)},J="Uncategorized",R=function(e){var t=e.user,n=Object(r.useState)(null),i=Object(s.a)(n,2),c=i[0],o=i[1],a=Object(r.useState)(null),u=Object(s.a)(a,2),b=u[0],f=u[1],p=Object(r.useState)(null),h=Object(s.a)(p,2),v=h[0],g=h[1],x=Object(r.useState)(!1),C=Object(s.a)(x,2),L=C[0],T=C[1],z=Object(r.useState)(null),E=Object(s.a)(z,2),A=E[0],_=E[1],F=Object(r.useState)(null),D=Object(s.a)(F,2),R=D[0],P=D[1],U=null===R||void 0===R?void 0:R.find((function(e){return e.id===c})),Y=Object(r.useState)((null===U||void 0===U?void 0:U.name)||""),Z=Object(s.a)(Y,2),X=Z[0],q=Z[1],G=Object(r.useMemo)((function(){return null===A||void 0===A?void 0:A.filter((function(e){if(c)if(c===J){if(null!==e&&void 0!==e&&e.group_id)return!1}else if((null===e||void 0===e?void 0:e.group_id)!==c)return!1;return!(v&&(null===e||void 0===e?void 0:e.url.toLowerCase().indexOf(v.toLowerCase()))<0)}))}),[v,c,A]),V=Object(r.useMemo)((function(){return null===R||void 0===R?void 0:R.reduce((function(e,t){var n=t.id,r=null===A||void 0===A?void 0:A.filter((function(e){return e.group_id===n}));return Object(w.a)(Object(w.a)({},e),{},Object(k.a)({},n,(null===r||void 0===r?void 0:r.length)||0))}),{})}),[R,A]),H=Object(r.useMemo)((function(){var e;return(null===A||void 0===A||null===(e=A.filter((function(e){return!e.group_id})))||void 0===e?void 0:e.length)||0}),[A]);Object(r.useEffect)((function(){null!==U&&void 0!==U&&U.name&&q(U.name)}),[U]);var K=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.from("groups").select("*").order("id",{ascending:!0});case 2:t=e.sent,n=t.data,(r=t.error)?console.log("error",r):P(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.from("links").select("*").order("id",{ascending:!1});case 2:t=e.sent,n=t.data,(r=t.error)?console.log("error",r):_(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.from("links").delete().eq("id",t);case 3:_(A.filter((function(e){return e.id!==t}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("error",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(l.a)(d.a.mark((function e(){var n,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:return T(!0),e.next=5,O.from("links").insert({url:v,user_id:t.id}).single();case 5:n=e.sent,r=n.data,(i=n.error)?(console.log(i),T(!1)):(_([].concat(Object(m.a)(A),[r])),g(null),T(!1));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(l.a)(d.a.mark((function e(){var n,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.from("groups").insert({name:null,user_id:t.id}).single();case 2:n=e.sent,r=n.data,(i=n.error)?console.log(i):P([].concat(Object(m.a)(R),[r]));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(d.a.mark((function e(t){var n,r,i,c,o,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.topicId,r=t.newTopicName,e.next=3,O.from("groups").update({name:r}).eq("id",n).single();case 3:i=e.sent,c=i.data,(o=i.error)?console.error(o):(a=R.map((function(e){return e.id===c.id?c:e})),P(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(l.a)(d.a.mark((function e(t){var n,r,i,c,o,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.linkId,r=t.newLinkName,e.next=3,O.from("links").update({name:r}).eq("id",n).single();case 3:i=e.sent,c=i.data,(o=i.error)?console.error(o):(a=A.map((function(e){return e.id===c.id?c:e})),_(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(l.a)(d.a.mark((function e(t){var n,r,i,c,o,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.linkId,r=t.topicId,e.next=3,O.from("links").update({group_id:r}).eq("id",n).single();case 3:i=e.sent,c=i.data,(o=i.error)?console.error(o):(a=A.map((function(e){return e.id===c.id?c:e})),_(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){R||K(),A||Q()}),[R,A]);return Object(N.jsxs)(j.b,{direction:"row",bg:"canvas",height:"100vh",overflowY:"hidden",children:[Object(N.jsx)(j.b,{direction:"column",width:"17%",height:"100%",justify:"flex-start",align:"center",p:5,children:Object(N.jsxs)(j.b,{bg:"light",width:"100%",height:"100%",direction:"column",align:"center",borderRadius:10,boxShadow:"base",children:[Object(N.jsx)(j.d,{color:"cyan.500",fontWeight:"black",fontSize:"2xl",pt:4,pb:"40px",children:"\ud83c\udf10 Atlas"}),Object(N.jsx)(j.a,{width:"100%",bg:c?null:"gray.50",onClick:function(){o(null)},_hover:{bg:"gray.100",cursor:"pointer"},children:Object(N.jsxs)(j.d,{py:2,px:6,alignSelf:"flex-start",fontWeight:c?null:"bold",children:["All Links (",null===A||void 0===A?void 0:A.length,")"]})}),Object(N.jsx)(j.a,{width:"100%",bg:c===J?"gray.50":null,onClick:function(){o(J)},_hover:{bg:"gray.100",cursor:"pointer"},children:Object(N.jsxs)(j.d,{py:2,px:6,alignSelf:"flex-start",fontWeight:c===J?"bold":null,children:["Uncategorized (",H,")"]})}),null===R||void 0===R?void 0:R.map((function(e){return Object(N.jsx)(W,{topic:e,activeTopicId:c,setActiveTopicId:o,topicLinksCount:V[e.id],addLinkToTopic:ie},e.id)})),Object(N.jsx)(y.a,{fontSize:"sm",bg:"gray.200",position:"absolute",bottom:10,onClick:te,borderRadius:8,children:"NEW GROUP"})]})}),Object(N.jsx)(j.b,{direction:"column",alignItems:"flex-start",width:"83%",height:"100%",children:Object(N.jsxs)(j.b,{direction:"column",width:"100%",children:[Object(N.jsxs)(j.b,{direction:"row",justify:"flex-start",pb:[4,4,2],pt:5,px:3,children:[Object(N.jsx)(I.b,{flex:0,children:Object(N.jsx)(I.a,{width:["95vw","95vw","50vw"],borderRadius:10,borderWidth:"0px",boxShadow:"base",bg:"light",type:"text",placeholder:"Search links...",value:v||"",onChange:function(e){return g(e.target.value)},disabled:L})}),v?Object(N.jsx)(y.a,{ml:2,onClick:ee,disabled:L,colorScheme:"teal",fontSize:"sm",_hover:{textDecoration:"none"},children:"Create link"}):null]}),Object(N.jsxs)(j.b,{direction:"column",height:"calc(100vh - 72px)",overflowY:"scroll",overflowX:"hidden",pt:[1,1,2],children:[Object(N.jsxs)(j.b,{direction:"row",align:"center",justify:"space-between",width:"100%",my:2,mx:2,pb:2,children:[c&&c!==J?Object(N.jsx)(S.a,{style:{width:"300px",fontSize:"20px",fontWeight:600},value:X||"",placeholder:"Enter topic name...",onChange:function(e){q(e.target.value)},onBlur:function(){ne({topicId:U.id,newTopicName:X})},readonly:!c||c===J}):Object(N.jsx)(j.d,{fontSize:"xl",fontWeight:600,children:c?J:"All Links"}),Object(N.jsx)(j.b,{mr:10,children:Object(N.jsx)(y.a,{width:"100px",borderRadius:8,fontSize:"sm",bg:"gray.200",disabled:!(null!==G&&void 0!==G&&G.length)||(null===G||void 0===G?void 0:G.length)>10,onClick:function(e){e.stopPropagation(),function(){for(var e=0;e<G.length;e++)B(G[e])}()},children:"OPEN ALL"})})]}),Object(N.jsx)(M,{category:null,links:G,inputTerm:v,deleteLink:$,activeLinkId:b,setActiveLinkId:f,editLinkName:re})]})]})})]})},P=function(){return Object(N.jsx)(j.b,{direction:"column",bg:"paper",height:"100vh",children:Object(N.jsx)(j.b,{align:"center",justify:"center",direction:"row",width:"100%",height:"100%",children:Object(N.jsxs)(j.b,{direction:"column",align:"center",children:[Object(N.jsx)(j.d,{color:"softBlack",fontWeight:700,fontSize:"6xl",pb:5,children:"Atlas"}),Object(N.jsx)(y.a,{borderRadius:2,color:"softBlack",bg:"linear-gradient(90deg, rgba(133,205,203,1) 15%, rgba(232,168,124,1) 66%, rgba(226,125,96,1) 85%)",onClick:function(){O.auth.signIn({provider:"github"},{redirectTo:"https://rynpatk.github.io/atlas"})},children:"Login with Github"})]})})})},U=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],i=t[1],c=Boolean(n);return Object(r.useEffect)((function(){var e,t=O.auth.session();i(null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:null);var n=O.auth.onAuthStateChange(function(){var e=Object(l.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null===n||void 0===n?void 0:n.user,i(null!==r&&void 0!==r?r:null);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),r=n.data;return function(){null===r||void 0===r||r.unsubscribe()}}),[n]),Object(N.jsx)(p.a,{backend:h.a,children:Object(N.jsx)(b.a,{basename:"/atlas",children:Object(N.jsxs)(f.c,{children:[Object(N.jsx)(f.a,{exact:!0,path:"/",element:c?Object(N.jsx)(R,{user:n}):Object(N.jsx)(P,{})}),Object(N.jsx)(f.a,{element:Object(N.jsx)(j.d,{children:"Oops!"}),status:404})]})})})},Y={Terracotta:"#E27D60",HalfBaked:"#85CDCB",Tacao:"#E8A87C",OrientalPink:"#C38D9E",Keppel:"#41B3A3",softBlack:"#282425",softPink:"#f15152ff","primary-focus":"#e86f68","primary-content":"#282425",softBlue:"#a4cbb4","secondary-focus":"#84b89a","secondary-content":"#282425",softYellow:"#ebdc99","accent-focus":"#e2cd6e",neutral:"#7d7259","neutral-focus":"#454035",paper:"#fbfbf8",base:"#e4d8b4","base-100":"#e4d8b4","base-200":"#d2c59d","base-300":"#c6b386","base-content":"#282425",info:"#2094f3",success:"#009485",warning:"#ff9900",error:"#ff5724",canvas:"#F4F1EA",light:"#FFFFFF"},Z=Object(a.b)({colors:Y,fonts:{heading:"Sora",body:"Sora"}});n(126);o.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(a.a,{theme:Z,children:Object(N.jsx)(U,{})})}),document.getElementById("root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.1c1b28fe.chunk.js.map