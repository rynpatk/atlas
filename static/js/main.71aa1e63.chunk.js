(this.webpackJsonpatlas=this.webpackJsonpatlas||[]).push([[0],{125:function(e,n,t){},126:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),c=t(36),o=t.n(c),a=t(20),l=t(19),s=t(9),u=t(2),d=t.n(u),b=t(70),f=t(8),p=t(134),h=t(69),j=t(59),v=t(67),g="https://zvwrqklvkomshwpkxepe.supabase.co",x="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp2d3Jxa2x2a29tc2h3cGt4ZXBlIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDcwOTg3MjgsImV4cCI6MTk2MjY3NDcyOH0.ZZMKNhlYSsvC0VB6fU1b1Xyp1Fn9WFS9Gpd8pVCaZCE",O=Object(v.a)(g,x),m=t(22),k=t(24),w=t(26),y=t(60),I=t(61),S=t(43),C=t(68),L=t(135),T=t(64),z=function(e){return{activeTool:"open",setActiveTool:function(n){e((function(e){return{activeTool:e.activeTool===n?null:n}}))}}},A=t.n(T)()((function(e,n){return Object(w.a)({},z(e,n))})),_=t(4),B=function(e){var n=e.str,t=e.substr,r=void 0===t?"":t;if(!r||!r.trim())return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(j.c,{mx:1,my:.5,fontSize:["sm","sm","md"],children:n})});var i=n.toLowerCase().indexOf(r.toLowerCase());if(i>-1){var c=i+r.length,o=n.slice(0,i),a=n.slice(i,c),l=n.slice(c,n.length);return Object(_.jsxs)(j.c,{fontSize:["sm","sm","md"],mx:1,my:.5,children:[o,Object(_.jsx)(j.c,{as:"span",fontWeight:600,color:"teal",children:a}),l]})}return null};function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};0===e.url.indexOf("http://")||0===e.url.indexOf("https://")?window.open(e.url,"_blank"):window.open("http://".concat(e.url),"_blank")}t(122);var E=function(e){var n=e.link,t=e.inputTerm,i=e.onClick,c=e.activeLinkId,o=e.openLink,a=e.editLinkName,l=n.id,u=n.url,d=n.created_at,b=n.name,f=Object(r.useState)((null===n||void 0===n?void 0:n.name)||""),p=Object(s.a)(f,2),h=p[0],v=p[1],g=Object(L.a)({type:"link",item:n,collect:function(e){return{isDragging:e.isDragging()}}}),x=Object(s.a)(g,2),O=x[0].isDragging,m=x[1],k=l===c,w=Object(C.a)(new Date(d),"MM/dd/yyyy");return Object(_.jsxs)(j.b,{onClick:function(){i(n)},_hover:{cursor:"pointer",bg:k?null:"gray.100"},direction:"row",align:k?"flex-start":"center",width:"100%",bg:O?"gray.50":k?"light":null,minHeight:k?"100px":null,boxShadow:k?"base":null,mb:2,py:1,px:3,borderRadius:10,ref:m,children:[k?Object(_.jsx)(S.a,{py:1,style:{width:"200px"},value:h||"",placeholder:"Enter name...",onChange:function(e){v(e.target.value)},onBlur:function(){a({linkId:n.id,newLinkName:h})}}):Object(_.jsx)(j.c,{py:1,width:"200px",color:b?"black":"gray",children:b||"Unnamed"}),Object(_.jsx)(j.a,{py:1,width:"50%",children:Object(_.jsx)(B,{str:u,substr:t})}),Object(_.jsx)(j.c,{py:1,width:"20%",children:w}),Object(_.jsx)(j.b,{align:"center",justify:"flex-end",flex:1,children:Object(_.jsx)(y.a,{width:"100px",borderRadius:"8px",colorScheme:"orange",color:k?"white":"warning",fontSize:"sm",variant:k?"solid":"ghost",onClick:function(e){e.stopPropagation(),o(n)},children:"Open"})})]})},N=function(e){var n=e.links,t=e.inputTerm,r=e.activeLinkId,i=e.setActiveLinkId,c=e.editLinkName,o=A((function(e){return e.activeTool}));if(!n)return null;var a=function(e){r===e.id||i(e.id)};return Object(_.jsx)(j.b,{direction:"column",flex:1,pl:2,mr:5,pb:2,children:n.map((function(e){return Object(_.jsx)(E,{link:e,inputTerm:t,onClick:a,openLink:F,activeTool:o,activeLinkId:r,setActiveLinkId:i,editLinkName:c},e.id)}))})},M=t(136),D=function(e){var n=e.topic,t=e.activeTopicId,r=e.setActiveTopicId,i=e.topicLinksCount,c=e.addLinkToTopic,o=Object(M.a)({accept:"link",drop:function(e){c({linkId:e.id,topicId:n.id})},collect:function(e){return{isOver:e.isOver()}}}),a=Object(s.a)(o,2),l=a[0].isOver,u=a[1],d=n.id,b=n.name;return Object(_.jsx)(j.a,{ref:u,width:"100%",bg:l?"cyan.100":t===d?"gray.50":null,_hover:{bg:"gray.100",cursor:"pointer"},onClick:function(){r(d)},children:Object(_.jsxs)(j.c,{py:2,px:6,alignSelf:"flex-start",fontWeight:t===d?"bold":null,onClick:function(){r(d)},children:[b||"Untitled"," (",i,")"]})},d)},J="Uncategorized",W=function(e){var n=e.user,t=Object(r.useState)(null),i=Object(s.a)(t,2),c=i[0],o=i[1],a=Object(r.useState)(null),u=Object(s.a)(a,2),b=u[0],f=u[1],p=Object(r.useState)(null),h=Object(s.a)(p,2),v=h[0],g=h[1],x=Object(r.useState)(!1),C=Object(s.a)(x,2),L=C[0],T=C[1],z=Object(r.useState)(null),A=Object(s.a)(z,2),B=A[0],E=A[1],M=Object(r.useState)(null),W=Object(s.a)(M,2),R=W[0],Y=W[1],Z=null===R||void 0===R?void 0:R.find((function(e){return e.id===c})),U=Object(r.useState)((null===Z||void 0===Z?void 0:Z.name)||""),X=Object(s.a)(U,2),q=X[0],G=X[1],P=Object(r.useMemo)((function(){return null===B||void 0===B?void 0:B.filter((function(e){if(c)if(c===J){if(null!==e&&void 0!==e&&e.group_id)return!1}else if((null===e||void 0===e?void 0:e.group_id)!==c)return!1;return!(v&&(null===e||void 0===e?void 0:e.url.toLowerCase().indexOf(v.toLowerCase()))<0)}))}),[v,c,B]),V=Object(r.useMemo)((function(){return null===R||void 0===R?void 0:R.reduce((function(e,n){var t=n.id,r=null===B||void 0===B?void 0:B.filter((function(e){return e.group_id===t}));return Object(w.a)(Object(w.a)({},e),{},Object(k.a)({},t,(null===r||void 0===r?void 0:r.length)||0))}),{})}),[R,B]),H=Object(r.useMemo)((function(){var e;return(null===B||void 0===B||null===(e=B.filter((function(e){return!e.group_id})))||void 0===e?void 0:e.length)||0}),[B]);Object(r.useEffect)((function(){null!==Z&&void 0!==Z&&Z.name&&G(Z.name)}),[Z]);var K=function(){var e=Object(l.a)(d.a.mark((function e(){var n,t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.from("groups").select("*").order("id",{ascending:!0});case 2:n=e.sent,t=n.data,(r=n.error)?console.log("error",r):Y(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(d.a.mark((function e(){var n,t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.from("links").select("*").order("id",{ascending:!0});case 2:n=e.sent,t=n.data,(r=n.error)?console.log("error",r):E(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.from("links").delete().eq("id",n);case 3:E(B.filter((function(e){return e.id!==n}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("error",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(l.a)(d.a.mark((function e(){var t,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:return T(!0),e.next=5,O.from("links").insert({url:v,user_id:n.id}).single();case 5:t=e.sent,r=t.data,(i=t.error)?(console.log(i),T(!1)):(E([].concat(Object(m.a)(B),[r])),g(null),T(!1));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(d.a.mark((function e(){var t,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.from("groups").insert({name:null,user_id:n.id}).single();case 2:t=e.sent,r=t.data,(i=t.error)?console.log(i):Y([].concat(Object(m.a)(R),[r]));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(l.a)(d.a.mark((function e(n){var t,r,i,c,o,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.topicId,r=n.newTopicName,e.next=3,O.from("groups").update({name:r}).eq("id",t).single();case 3:i=e.sent,c=i.data,(o=i.error)?console.error(o):(a=R.map((function(e){return e.id===c.id?c:e})),Y(a));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=Object(l.a)(d.a.mark((function e(n){var t,r,i,c,o,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.linkId,r=n.newLinkName,e.next=3,O.from("links").update({name:r}).eq("id",t).single();case 3:i=e.sent,c=i.data,(o=i.error)?console.error(o):(a=B.map((function(e){return e.id===c.id?c:e})),E(a));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(l.a)(d.a.mark((function e(n){var t,r,i,c,o,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.linkId,r=n.topicId,e.next=3,O.from("links").update({group_id:r}).eq("id",t).single();case 3:i=e.sent,c=i.data,(o=i.error)?console.error(o):(a=B.map((function(e){return e.id===c.id?c:e})),E(a));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){R||K(),B||Q()}),[R,B]);return Object(_.jsxs)(j.b,{direction:"row",bg:"canvas",height:"100vh",overflowY:"hidden",children:[Object(_.jsx)(j.b,{direction:"column",width:"17%",height:"100%",justify:"flex-start",align:"center",p:5,children:Object(_.jsxs)(j.b,{bg:"light",width:"100%",height:"100%",direction:"column",align:"center",borderRadius:10,boxShadow:"base",children:[Object(_.jsx)(j.c,{color:"cyan.500",fontWeight:"black",fontSize:"2xl",pt:4,pb:"40px",children:"\ud83c\udf10 Atlas"}),Object(_.jsx)(j.a,{width:"100%",bg:c?null:"gray.50",onClick:function(){o(null)},_hover:{bg:"gray.100",cursor:"pointer"},children:Object(_.jsxs)(j.c,{py:2,px:6,alignSelf:"flex-start",fontWeight:c?null:"bold",children:["All Links (",null===B||void 0===B?void 0:B.length,")"]})}),Object(_.jsx)(j.a,{width:"100%",bg:c===J?"gray.50":null,onClick:function(){o(J)},_hover:{bg:"gray.100",cursor:"pointer"},children:Object(_.jsxs)(j.c,{py:2,px:6,alignSelf:"flex-start",fontWeight:c===J?"bold":null,children:["Uncategorized (",H,")"]})}),null===R||void 0===R?void 0:R.map((function(e){return Object(_.jsx)(D,{topic:e,activeTopicId:c,setActiveTopicId:o,topicLinksCount:V[e.id],addLinkToTopic:ie},e.id)})),Object(_.jsx)(y.a,{fontSize:"sm",bg:"gray.200",position:"absolute",bottom:10,onClick:ne,children:"Create Topic"})]})}),Object(_.jsx)(j.b,{direction:"column",alignItems:"flex-start",width:"83%",height:"100%",children:Object(_.jsxs)(j.b,{direction:"column",width:"100%",children:[Object(_.jsxs)(j.b,{direction:"row",justify:"flex-start",pb:[4,4,2],pt:5,px:3,children:[Object(_.jsx)(I.b,{flex:0,children:Object(_.jsx)(I.a,{width:["95vw","95vw","50vw"],borderRadius:10,borderWidth:"0px",boxShadow:"base",bg:"light",type:"text",placeholder:"Search links...",value:v||"",onChange:function(e){return g(e.target.value)},disabled:L})}),v?Object(_.jsx)(y.a,{ml:2,onClick:ee,disabled:L,colorScheme:"teal",fontSize:"sm",_hover:{textDecoration:"none"},children:"Create link"}):null]}),Object(_.jsxs)(j.b,{direction:"column",height:"calc(100vh - 72px)",overflowY:"scroll",overflowX:"hidden",pt:[1,1,2],children:[Object(_.jsxs)(j.b,{direction:"row",align:"center",justify:"space-between",width:"100%",my:2,mx:2,pb:2,children:[c&&c!==J?Object(_.jsx)(S.a,{style:{width:"300px",fontSize:"20px",fontWeight:600},value:q||"",placeholder:"Enter topic name...",onChange:function(e){G(e.target.value)},onBlur:function(){te({topicId:Z.id,newTopicName:q})},readonly:!c||c===J}):Object(_.jsx)(j.c,{fontSize:"xl",fontWeight:600,children:c?J:"All Links"}),Object(_.jsx)(j.b,{mr:10,children:Object(_.jsx)(y.a,{width:"100px",borderRadius:"8px",fontSize:"sm",bg:"gray.200",disabled:!(null!==P&&void 0!==P&&P.length)||(null===P||void 0===P?void 0:P.length)>10,onClick:function(e){e.stopPropagation(),function(){for(var e=0;e<P.length;e++)F(P[e])}()},children:"Open All"})})]}),Object(_.jsx)(N,{category:null,links:P,inputTerm:v,deleteLink:$,activeLinkId:b,setActiveLinkId:f,editLinkName:re})]})]})})]})},R=function(){return Object(_.jsx)(j.b,{direction:"column",bg:"paper",height:"100vh",children:Object(_.jsx)(j.b,{align:"center",justify:"center",direction:"row",width:"100%",height:"100%",children:Object(_.jsxs)(j.b,{direction:"column",align:"center",children:[Object(_.jsx)(j.c,{color:"softBlack",fontWeight:700,fontSize:"6xl",pb:5,children:"Atlas"}),Object(_.jsx)(y.a,{borderRadius:2,color:"softBlack",bg:"linear-gradient(90deg, rgba(133,205,203,1) 15%, rgba(232,168,124,1) 66%, rgba(226,125,96,1) 85%)",onClick:function(){O.auth.signIn({provider:"github"},{redirectTo:"https://rynpatk.github.io/atlas"})},children:"Login with Github"})]})})})},Y=function(){var e=Object(r.useState)(null),n=Object(s.a)(e,2),t=n[0],i=n[1],c=Boolean(t);return Object(r.useEffect)((function(){var e,n=O.auth.session();i(null!==(e=null===n||void 0===n?void 0:n.user)&&void 0!==e?e:null);var t=O.auth.onAuthStateChange(function(){var e=Object(l.a)(d.a.mark((function e(n,t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null===t||void 0===t?void 0:t.user,i(null!==r&&void 0!==r?r:null);case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),r=t.data;return function(){null===r||void 0===r||r.unsubscribe()}}),[t]),Object(_.jsx)(p.a,{backend:h.a,children:Object(_.jsx)(b.a,{basename:"/atlas",children:Object(_.jsxs)(f.c,{children:[Object(_.jsx)(f.a,{exact:!0,path:"/",element:c?Object(_.jsx)(W,{user:t}):Object(_.jsx)(R,{})}),Object(_.jsx)(f.a,{element:Object(_.jsx)(j.c,{children:"Oops!"}),status:404})]})})})},Z={Terracotta:"#E27D60",HalfBaked:"#85CDCB",Tacao:"#E8A87C",OrientalPink:"#C38D9E",Keppel:"#41B3A3",softBlack:"#282425",softPink:"#f15152ff","primary-focus":"#e86f68","primary-content":"#282425",softBlue:"#a4cbb4","secondary-focus":"#84b89a","secondary-content":"#282425",softYellow:"#ebdc99","accent-focus":"#e2cd6e",neutral:"#7d7259","neutral-focus":"#454035",paper:"#fbfbf8",base:"#e4d8b4","base-100":"#e4d8b4","base-200":"#d2c59d","base-300":"#c6b386","base-content":"#282425",info:"#2094f3",success:"#009485",warning:"#ff9900",error:"#ff5724",canvas:"#F4F1EA",light:"#FFFFFF"},U=Object(a.b)({colors:Z,fonts:{heading:"Sora",body:"Sora"}});t(125);o.a.render(Object(_.jsx)(i.a.StrictMode,{children:Object(_.jsx)(a.a,{theme:U,children:Object(_.jsx)(Y,{})})}),document.getElementById("root"))}},[[126,1,2]]]);
//# sourceMappingURL=main.71aa1e63.chunk.js.map